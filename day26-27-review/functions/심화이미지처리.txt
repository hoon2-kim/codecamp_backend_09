브라우저   백엔드    스토리지

백엔드로 파일들이 업로드 되고있는데 파일들의 용량이 크기때문에 백엔드 컴퓨터에 부하가 많이온다
그래서 이미지 업로드관련 api만 있는 백엔드 컴퓨터를 둔다 / 이미지서버 백엔드 , API서버 백엔드
아니면 다른방법도 있는데 브라우저에서 바로 스토리지로 바로 넘기는건데 이 방법은 잘못쓰면 문제가 많다
그래서 이 방법은 브라우저가 백엔드한테 업로드권한을 요청하고 백엔드는 스토리지에서 특정시간과 권한url을 받아서 브라우저에게 준다

그리고 만약 개인적인 사진을 올리면 공개url로 바로 아무나 볼 수 있게하는게 아니라 백엔드에서 로그인체크하고 스토리지에 똑같이 url 받아와서
특정시간이랑,url을 브라우저에 준다

다양한 사이즈의 폴더들이 생길 수 있는데(모바일사이즈,데스크탑사이즈,프로필사이즈 등등....) 이러면 비용이 많이든다
그래서 ondemand resizing이라는 방법이 있다.
스토리지에는 원본만 저장하고 브라우저에서 사진을 요청하는데 다른컴퓨터로 요청을 하고 다른컴퓨터에서 메모리에 이 사진이 있는지 찾는다
없다면 스토리지에서 원본을 찾아와서 사이즈를 변경한다음 메모리에 저장시킨다음 브라우저에 준다 근데 이 방법의 단점은 최초 1회 때 굉장히 느리다
장점은 스토리지 비용 아낄 수 있다